<div class='container-fluid'>
<%if flash[:notice]%>
  <div class="alert alert-success alert-dismissible fade in" role="alert"> 
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
    <p><%=flash[:notice]%></p>
  </div>
<%end%>
<%if flash[:error]%>
  <div class="alert alert-danger alert-dismissible fade in" role="alert"> 
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
    <p><%=flash[:error]%></p>
  </div>
<%end%>


<div class='text-center'><button class="btn btn-block btn-success" data-toggle="modal" data-target="#user_new">Add a new user</button></div>

    <form action='create_user' method='post'>
      
    <input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
    
    <div class="modal fade" id="user_new" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Add user</h4>
          </div>
          <div class="modal-body">
              
              <div class="form-group">
                <label for="inputHandle">Handle:</label>
                <input name='user[handle]' type="text" id="inputHandle" class="form-control" required>
                <br>
              </div>
              <div class="form-group">
                <label for="inputPass">Password:</label>
                <input name='user[password]' type="password" id="inputHandle" class="form-control" required>
                <br>
              </div>
              <div class="form-group">
              <label class="checkbox" for="checkbox1">
  
                  <input type="checkbox" name='user[is_admin]' value="true" data-toggle="checkbox">
              
                  Admin
              
              </label>
              </div>
              
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success">Create</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <br><br>
          </div>
        </div>
      </div>
    </div>
    </form>
<%@users.each do |user|%>
    <%if user==current_user%>
    <%else%>
    <div class='col-xs-12 col-sm-6 col-md-4 col-lg-3' style='background-color: #FDFDFD; padding: 20px;'>
        <form action='change_user' method='post'>
            
            <input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
            <input name="user[id]" value="<%=user.id%>" type="hidden">
            
            <div class="form-group">
              <label for="inputHandle">Handle:</label>
              <input name='user[handle]' type="text" id="inputHandle" class="form-control" value='<%=user.handle%>'>
              <br>
            </div>
            
            <div class="form-group">
              <label for="inputFn">First_name:</label>
              <input name='user[first_name]' type="text" id="inputFn" class="form-control" value='<%=user.first_name%>'>
              <br>
            </div>
            
            <div class="form-group">
              <label for="inputLn">Last_name:</label>
              <input name='user[last_name]' type="text" id="inputLn" class="form-control" value='<%=user.last_name%>'>
              <br>
            </div>
            
            <div class="form-group">
              <label for="inputEmail">Email:</label>
              <input name='user[email]' type="text" id="inputEmail" class="form-control" value='<%=user.email%>'>
              <br>
            </div>
            
            <div class="form-group">
              <label for="inputTel">Tel:</label>
              <input name='user[tel]' type="text" id="inputTel" class="form-control" value='<%=user.tel%>'>
              <br>
            </div>
            
            <div class="form-group">
              <label for="inputWhat">Whatsapp:</label>
              <input name='user[whatsapp]' type="text" id="inputWhat" class="form-control" value='<%=user.whatsapp%>'>
              <br>
            </div>
            <div class="form-group">
            <label class="checkbox" for="checkbox1">

                <input type="checkbox" name='user[is_admin]' value="true" data-toggle="checkbox" <%=user.is_admin ? 'checked' : ''%>>
            
                Admin
            
            </label>
            </div>
            <div class='text-center'><button class="btn btn-block btn-success" type="submit">Update</button></div>
        </form>
        <br>
        <div class='text-center'><button class="btn btn-block btn-danger" data-toggle="modal" data-target="#change_password<%=user.id%>">Change password</button></div>
        
        
        
        
        <!--MODAL-->
        <form action='change_password_mass' method='post'>
          
        <input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
        <input name="pass[id]" value="<%= user.id %>" type="hidden">
        
        <div class="modal fade" id="change_password<%=user.id%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Change password</h4>
              </div>
              <div class="modal-body">
                
                  <div class="form-group">
                    <label for="name">Password:</label>
                    <input type='password' name='pass[pass]' class="form-control" id="name" placeholder='Enter new password...'>
                  </div>
                  
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-success">Change</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <br><br>
              </div>
            </div>
          </div>
        </div>
        </form>
        
        
        
        
        
        <br>
        <div class='text-center'><button class="btn btn-block btn-danger btn-fill" data-toggle="modal" data-target="#user_delete<%=user.id%>">Delete</button></div>
        
        
        <form action='delete_user' method='post'>
      
        <input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
        <input name="user_id" value="<%= user.id%>" type="hidden">
        
        <div class="modal fade" id="user_delete<%=user.id%>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Delete user</h4>
              </div>
              <div class="modal-body">
                  Are you sure you want to delete this user? if you do, all of the tasks that they have created will also be destroyed.
                  
              </div>
              <div class="modal-footer">
                <button type="submit" class="btn btn-danger">Yes</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
                <br><br>
              </div>
            </div>
          </div>
        </div>
        </form>
        
        
        
    </div>
    <%end%>

<%end%>



</div>
</div>